{% extends "base.html" %}

{% block title %}Status das Respostas{% endblock %}

{% block content %}
<div class="container py-5">
  <h2 class="mb-4">Status das Respostas</h2>
  <table class="table table-striped table-bordered shadow-sm">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Email</th>
        <th>Telefone</th>
        <th>Resposta</th>
        <th>Data/Hora</th>
        <th>Ver Convite</th>
        <th>URL do Convite</th>
      </tr>
    </thead>
    <tbody>
      {% for row in convidados %}
      <tr>
        <td>{{ row.name }}</td>
        <td>{{ row.email }}</td>
        <td>{{ row.phone }}</td>
        <td>
          {% if row.response == 'yes' %}
            <span class="badge bg-success">Sim</span>
          {% elif row.response == 'no' %}
            <span class="badge bg-danger">NÃ£o</span>
          {% else %}
            <span class="text-muted">Aguardando</span>
          {% endif %}
        </td>
        <td>
          {{ row.response_date.strftime("%d/%m/%Y %H:%M") if row.response_date else '-' }}
        </td>
        <td>
          <a 
            href="{{ url_for('invite', token=row.token) }}" 
            target="_blank" 
            class="btn btn-sm btn-outline-primary"
          >Ver Convite</a>
        </td>
        <td>
          <a href="{{ url_for('invite', token=row.token, _external=True) }}">
            {{ url_for('invite', token=row.token, _external=True) }}
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
